<!DOCTYPE html>
<html>
<head >
    <meta charset="UTF-8">
    <title>children兼容写法-复习</title>
</head>
<body>

<div id="div1">
    <div></div>
    <div></div>
    <div>    </div>
    <p></p>

    <p></p>

    <p></p>

    <p> </p>
    <!-- 内容-->
</div>

<script type="text/javascript">
    var oDiv = document.getElementById("div1");
//
//    function children(){
//
//        //根据浏览器的差别获取到所有的元素子节点
//        var ary = [];
//        if(/^MSIE (6|7|8)$/i.test(window.navigator.userAgent)){
//            var curNodes = curEle.childNodes;
//            for(var i =0;i<curNodes.length;i++){
//                if(curNodes.nodeType === 1){
//                    ary[ary.length]=curNodes[i];
//                }
//            }
//        }else{
//             ary = [].prototype.slice.call(curEle.children);
//        }
//
//
//        //根据传入进来的tagname值，获取到元素字字节点中的相对应的值
//
//        if(typeof tagname === "string"){//如果传入了值
//            for(var k = 0;k<ary.length;k++){
//                var curNodEle = ary[k];
//                if(tagname.toLowerCase()!==ary[i].nodeName.toLowerCase()){
//                    ary.slice()
//                }
//            }
//        }

function children(curEle, tagName) {
    var ary = [];//定义一个空数组来接受数据
    //获取到当前元素下的所有字节点
    var nodeLists = curEle.childNodes;
    //循环所有的子节点，通过nodetype值判断出元素子节点
    for (var i = 0, len = nodeLists.length; i < len; i++) {
        var curNod = nodeLists[i];
        if (curNod.nodeType === 1) {
        //说明是元素子节点，如果没有传入tagname值，就把当前的这个值传入数组，如果传入了tagname值，还要和这个参数进行判断，符合这个值的才能够传入数组；
            if (typeof tagName === "string") {
            //这里不能写undefined，因为传入的不是元素标签，只要有值就也不会到这个条件中，所以需要使用“string”来判断,如果条件成立，表示有传递值，
                if (curNod.nodeName.toLocaleLowerCase() === tagName.toLocaleLowerCase()) {
                    ary[ary.length] = curNod;
                    //如果当前项的nodename值和传递进来的值一样。表示符合条件，所以传入数组
                }

            }else{
                //没有传递规定的tagname，直接反悔元素集合
                ary[ary.length]=curNod;
            }
        }
    }
    return ary;//所有的判断执行完成之后，需要返回一个值
}

    console.log(children(oDiv,"p").length);
</script>
</body>
</html>